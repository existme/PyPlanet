

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Configuration &mdash; PyPlanet 0.2.0 documentation</title>
  

  
  
  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  

  

  
        <link rel="index" title="Index"
              href="../genindex.html"/>
        <link rel="search" title="Search" href="../search.html"/>
    <link rel="top" title="PyPlanet 0.2.0 documentation" href="../index.html"/> 

  
  <script src="../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../index.html" class="icon icon-home"> PyPlanet
          

          
          </a>

          
            
            
              <div class="version">
                0.2.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">User Documentation</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="index.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="upgrading.html">Upgrading PyPlanet</a></li>
<li class="toctree-l1"><a class="reference internal" href="../convert/index.html">Migrating from old controller</a></li>
</ul>
<p class="caption"><span class="caption-text">Apps Documentation</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../apps/contrib/admin.html">Admin</a></li>
<li class="toctree-l1"><a class="reference internal" href="../apps/contrib/jukebox.html">Jukebox</a></li>
<li class="toctree-l1"><a class="reference internal" href="../apps/contrib/karma.html">Karma</a></li>
<li class="toctree-l1"><a class="reference internal" href="../apps/contrib/local_records.html">Local Records</a></li>
<li class="toctree-l1"><a class="reference internal" href="../apps/contrib/dedimania.html">Dedimania Records</a></li>
<li class="toctree-l1"><a class="reference internal" href="../apps/contrib/mapinfo.html">Map Info</a></li>
<li class="toctree-l1"><a class="reference internal" href="../apps/contrib/players.html">Players</a></li>
<li class="toctree-l1"><a class="reference internal" href="../apps/contrib/mx.html">ManiaExchange</a></li>
<li class="toctree-l1"><a class="reference internal" href="../apps/contrib/transactions.html">Transactions</a></li>
</ul>
<p class="caption"><span class="caption-text">Developer Documentation</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../architecture/index.html">Architecture &amp; Design</a></li>
<li class="toctree-l1"><a class="reference internal" href="../apps/index.html">App Development</a></li>
<li class="toctree-l1"><a class="reference internal" href="../signals/index.html">Signals (callbacks)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api/index.html">API Documentation</a></li>
</ul>
<p class="caption"><span class="caption-text">About PyPlanet</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../support.html">Support, Bug report &amp; Contact</a></li>
<li class="toctree-l1"><a class="reference internal" href="../privacy.html">Privacy</a></li>
<li class="toctree-l1"><a class="reference internal" href="../changelog.html">Changelog</a></li>
<li class="toctree-l1"><a class="reference internal" href="../todo.html">Todo (docs)</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">PyPlanet</a>
        
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
      <li>Configuration</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            
              <a href="https://github.com/PyPlanet/pyplanet/blob/master/docs/source/intro/configuration.rst" class="fa fa-github"> Edit on GitHub</a>
            
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="line-block">
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
</div>
<div class="section" id="configuration">
<h1>Configuration<a class="headerlink" href="#configuration" title="Permalink to this headline">¶</a></h1>
<p><strong>Settings module</strong> is where the PyPlanet settings are stored. You provide the settings module by providing the
environment variable <code class="docutils literal"><span class="pre">PYPLANET_SETTINGS_MODULE</span></code>. Most of the times this is set in the <code class="docutils literal"><span class="pre">manage.py</span></code>.</p>
<p>In most cases this settings module is <code class="docutils literal"><span class="pre">settings</span></code> and is located at the project root subfolder <code class="docutils literal"><span class="pre">settings</span></code>.</p>
<p><strong>Split files</strong> is the default, based on the CLI project generation. This will create two files inside of the settings module,
the one is for apps (<code class="docutils literal"><span class="pre">apps.py</span></code>) and the other for all base configuration (<code class="docutils literal"><span class="pre">base.py</span></code>).</p>
<p><strong>Pools</strong> are the different instances that will be running from PyPlanet. PyPlanet supports multiple controllers from a
single setup and project, and even a start command. We are just spawning subprocesses when you start PyPlanet.
More information about this setup and architecture on the <a class="reference external" href="../core/architecture">Architecture</a> overview.</p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p>In the examples in this document you often find an dictionary with the key being <code class="docutils literal"><span class="pre">default</span></code>. This is a <strong>Pool aware setting</strong>
and is different for every pool.</p>
<p class="last">If you are going to add another pool, you should add the pool name to the keys of the dictionary, and fill the value like it
is in the examples given here.</p>
</div>
<div class="section" id="debug-mode-base-py">
<h2>Debug Mode (base.py)<a class="headerlink" href="#debug-mode-base-py" title="Permalink to this headline">¶</a></h2>
<p>In most cases you don&#8217;t have to use this setting. This setting is only here for developers.
While you are in debug mode, there will be <strong>More verbose output, no reporting of exceptions, and debugging of SQL queries</strong>.</p>
<p>When generating a project with the CLI, you will find this setting to be looking at your environment variable <code class="docutils literal"><span class="pre">PYPLANET_DEBUG</span></code>.
Therefor, enable debug by starting PyPlanet with <code class="docutils literal"><span class="pre">PYPLANET_DEBUG=1</span></code>. Or changing the setting to <code class="docutils literal"><span class="pre">DEBUG</span> <span class="pre">=</span> <span class="pre">True</span></code>.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Please enable <code class="docutils literal"><span class="pre">DEBUG</span></code> when developing, as it won&#8217;t send reports to the PyPlanet developers, which needs time to investigate
and cleanup.</p>
</div>
</div>
<div class="section" id="pool-defining-base-py">
<h2>Pool defining (base.py)<a class="headerlink" href="#pool-defining-base-py" title="Permalink to this headline">¶</a></h2>
<p>You need to define the pools you want to start and have activated with the <code class="docutils literal"><span class="pre">POOLS</span></code> list.</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">POOLS</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;default&#39;</span><span class="p">]</span> <span class="c1"># Add more identifiers to start more controller instances.</span>
</pre></div>
</div>
</div>
<div class="section" id="owners-base-py">
<h2>Owners (base.py)<a class="headerlink" href="#owners-base-py" title="Permalink to this headline">¶</a></h2>
<p>Because you want to have admin access at the first boot, you have to define a few master admin logins here. This is optional
but will help you to get started directly after starting. This setting is pool aware.</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">OWNERS</span> <span class="o">=</span> <span class="p">{</span>
  <span class="s1">&#39;default&#39;</span><span class="p">:</span> <span class="p">[</span> <span class="s1">&#39;your-maniaplanet-login&#39;</span><span class="p">,</span> <span class="s1">&#39;second-login&#39;</span> <span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="database-configuration-base-py">
<h2>Database configuration (base.py)<a class="headerlink" href="#database-configuration-base-py" title="Permalink to this headline">¶</a></h2>
<p>The database configuration is mostly the first setting you will adjust to your needs. Currently PyPlanet has support for
these <em>database drivers</em>:</p>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">peewee_async.MySQLDatabase</span></code>: Using PyMySQL, a full Python based driver. (Supports MariaDB and PerconaDB).</li>
<li><code class="docutils literal"><span class="pre">peewee_async.PostgresqlDatabase</span></code>: Using a full native Python driver.</li>
</ul>
<p><strong>Creating database</strong>:</p>
<p>You will have to create the database scheme yourself. Make sure you create it with a database collate that is based on
UTF-8. We recommend for MySQL: <code class="docutils literal"><span class="pre">utf8mb4_unicode_ci</span></code> to work with the new symbols in Maniaplanet.</p>
<p>Create MySQL Database by running this command:</p>
<div class="highlight-sql"><div class="highlight"><pre><span></span><span class="k">CREATE</span> <span class="k">DATABASE</span> <span class="n">pyplanet</span>
  <span class="nb">CHARACTER</span> <span class="k">SET</span> <span class="n">utf8mb4</span>
  <span class="k">COLLATE</span> <span class="n">utf8mb4_unicode_ci</span><span class="p">;</span>
</pre></div>
</div>
<p><strong>Configuration</strong></p>
<p>Configuration can follow the following examples:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">DATABASES</span> <span class="o">=</span> <span class="p">{</span> <span class="c1"># Using PostgreSQL.</span>
<span class="s1">&#39;default&#39;</span><span class="p">:</span> <span class="p">{</span>
    <span class="s1">&#39;ENGINE&#39;</span><span class="p">:</span> <span class="s1">&#39;peewee_async.PostgresqlDatabase&#39;</span><span class="p">,</span>
    <span class="s1">&#39;NAME&#39;</span><span class="p">:</span> <span class="s1">&#39;pyplanet&#39;</span><span class="p">,</span>
    <span class="s1">&#39;OPTIONS&#39;</span><span class="p">:</span> <span class="p">{</span>
      <span class="s1">&#39;host&#39;</span><span class="p">:</span> <span class="s1">&#39;localhost&#39;</span><span class="p">,</span>
      <span class="s1">&#39;user&#39;</span><span class="p">:</span> <span class="s1">&#39;pyplanet&#39;</span><span class="p">,</span>
      <span class="s1">&#39;password&#39;</span><span class="p">:</span> <span class="s1">&#39;pyplanet&#39;</span><span class="p">,</span>
      <span class="s1">&#39;autocommit&#39;</span><span class="p">:</span> <span class="bp">True</span><span class="p">,</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="n">DATABASES</span> <span class="o">=</span> <span class="p">{</span> <span class="c1"># Using MySQL (or MariaDB, PerconaDB, etc).</span>
  <span class="s1">&#39;default&#39;</span><span class="p">:</span> <span class="p">{</span>
    <span class="s1">&#39;ENGINE&#39;</span><span class="p">:</span> <span class="s1">&#39;peewee_async.MySQLDatabase&#39;</span><span class="p">,</span>
    <span class="s1">&#39;NAME&#39;</span><span class="p">:</span> <span class="s1">&#39;pyplanet&#39;</span><span class="p">,</span>
    <span class="s1">&#39;OPTIONS&#39;</span><span class="p">:</span> <span class="p">{</span>
      <span class="s1">&#39;host&#39;</span><span class="p">:</span> <span class="s1">&#39;localhost&#39;</span><span class="p">,</span>
      <span class="s1">&#39;user&#39;</span><span class="p">:</span> <span class="s1">&#39;pyplanet&#39;</span><span class="p">,</span>
      <span class="s1">&#39;password&#39;</span><span class="p">:</span> <span class="s1">&#39;pyplanet&#39;</span><span class="p">,</span>
      <span class="s1">&#39;charset&#39;</span><span class="p">:</span> <span class="s1">&#39;utf8&#39;</span><span class="p">,</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="dedicated-server-base-py">
<h2>Dedicated Server (base.py)<a class="headerlink" href="#dedicated-server-base-py" title="Permalink to this headline">¶</a></h2>
<p>This one is pretty important, and pretty simple too. Look at the examples bellow, and you know how to set this up!</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">DEDICATED</span> <span class="o">=</span> <span class="p">{</span>
  <span class="s1">&#39;default&#39;</span><span class="p">:</span> <span class="p">{</span>
    <span class="s1">&#39;HOST&#39;</span><span class="p">:</span> <span class="s1">&#39;127.0.0.1&#39;</span><span class="p">,</span>
    <span class="s1">&#39;PORT&#39;</span><span class="p">:</span> <span class="s1">&#39;5000&#39;</span><span class="p">,</span>
    <span class="s1">&#39;USER&#39;</span><span class="p">:</span> <span class="s1">&#39;SuperAdmin&#39;</span><span class="p">,</span>
    <span class="s1">&#39;PASSWORD&#39;</span><span class="p">:</span> <span class="s1">&#39;SuperAdmin&#39;</span><span class="p">,</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="map-settings-base-py">
<h2>Map settings (base.py)<a class="headerlink" href="#map-settings-base-py" title="Permalink to this headline">¶</a></h2>
<p>Some of these settings are required to be able to save match settings for example.</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="c1"># Map configuration is a set of configuration options related to match settings etc.</span>
<span class="c1"># Matchsettings filename.</span>
<span class="n">MAP_MATCHSETTINGS</span> <span class="o">=</span> <span class="p">{</span>
  <span class="s1">&#39;default&#39;</span><span class="p">:</span> <span class="s1">&#39;autosave.txt&#39;</span><span class="p">,</span>
<span class="p">}</span>

<span class="c1"># You can set this to a automatically generated name:</span>
<span class="n">MAP_MATCHSETTINGS</span> <span class="o">=</span> <span class="p">{</span>
  <span class="s1">&#39;default&#39;</span><span class="p">:</span> <span class="s1">&#39;{server_login}.txt&#39;</span><span class="p">,</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="storage-base-py">
<h2>Storage (base.py)<a class="headerlink" href="#storage-base-py" title="Permalink to this headline">¶</a></h2>
<p>This may need some explanation, why is this here? We wanted to be able to run PyPlanet on a separate machine as the dedicated
is. But also access files from the dedicated for investigating maps, loading and writing maps and settings.</p>
<p>To be able to make this simple, and robust, we will implement several so called <em>storage drivers</em> that will work local or remote.
For example: <em>SFTP</em>, <em>FTP</em>, etc.</p>
<p><strong>Local Dedicated</strong></p>
<p>If you run your dedicated server locally, you should use the following setting:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">STORAGE</span> <span class="o">=</span> <span class="p">{</span>
  <span class="s1">&#39;default&#39;</span><span class="p">:</span> <span class="p">{</span>
    <span class="s1">&#39;DRIVER&#39;</span><span class="p">:</span> <span class="s1">&#39;pyplanet.core.storage.drivers.local.LocalDriver&#39;</span><span class="p">,</span>
    <span class="s1">&#39;OPTIONS&#39;</span><span class="p">:</span> <span class="p">{},</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p><strong>Using SFTP/SCP/SSH</strong></p>
<p>If your dedicated server is remote, and you want to give access, you can use the SFTP driver (that works over SSH).</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">STORAGE</span> <span class="o">=</span> <span class="p">{</span>
  <span class="s1">&#39;default&#39;</span><span class="p">:</span> <span class="p">{</span>
    <span class="s1">&#39;DRIVER&#39;</span><span class="p">:</span> <span class="s1">&#39;pyplanet.core.storage.drivers.asyncssh.SFTPDriver&#39;</span><span class="p">,</span>
    <span class="s1">&#39;OPTIONS&#39;</span><span class="p">:</span> <span class="p">{</span>
      <span class="s1">&#39;HOST&#39;</span><span class="p">:</span> <span class="s1">&#39;remote-hostname.com&#39;</span><span class="p">,</span>
      <span class="s1">&#39;PORT&#39;</span><span class="p">:</span> <span class="mi">22</span><span class="p">,</span>
      <span class="s1">&#39;USERNAME&#39;</span><span class="p">:</span> <span class="s1">&#39;maniaplanet&#39;</span><span class="p">,</span>

      <span class="c1"># Using password:</span>
      <span class="s1">&#39;PASSWORD&#39;</span><span class="p">:</span> <span class="s1">&#39;only-when-using-password&#39;</span><span class="p">,</span>

      <span class="c1"># Using private/public keys:</span>
      <span class="s1">&#39;CLIENT_KEYS&#39;</span><span class="p">:</span> <span class="p">[</span>
        <span class="s1">&#39;/home/mp/.ssh/id_rsa&#39;</span>
      <span class="p">],</span>
      <span class="s1">&#39;PASSPHRASE&#39;</span><span class="p">:</span> <span class="s1">&#39;optional&#39;</span><span class="p">,</span>

      <span class="c1"># Optional:</span>
      <span class="s1">&#39;KNOWN_HOSTS&#39;</span><span class="p">:</span> <span class="s1">&#39;~/.ssh/known_hosts&#39;</span><span class="p">,</span>
      <span class="s1">&#39;KWARGS&#39;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s1">&#39;CUSTOM_OPTIONS&#39;</span><span class="p">:</span> <span class="s1">&#39;http://asyncssh.readthedocs.io/en/latest/#sftp-client&#39;</span><span class="p">,</span>
      <span class="p">}</span>
    <span class="p">},</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The SFTP driver has not yet been fully tested.
Documentation is available on: <a class="reference external" href="http://asyncssh.readthedocs.io/en/latest/#sftp-client">http://asyncssh.readthedocs.io/en/latest/#sftp-client</a></p>
</div>
</div>
<div class="section" id="cache-base-py">
<h2>Cache (base.py)<a class="headerlink" href="#cache-base-py" title="Permalink to this headline">¶</a></h2>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">This functionality is not yet implemented. Please don&#8217;t define <code class="docutils literal"><span class="pre">CACHE</span></code> setting.</p>
</div>
</div>
<div class="section" id="enabling-apps-apps-py">
<h2>Enabling apps (apps.py)<a class="headerlink" href="#enabling-apps-apps-py" title="Permalink to this headline">¶</a></h2>
<p>You can enable apps in the <code class="docutils literal"><span class="pre">APPS</span></code> setting. This is pretty simple and straight forward.
The order doesn&#8217;t make a difference when starting/loading PyPlanet.</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">APPS</span> <span class="o">=</span> <span class="p">{</span>
  <span class="s1">&#39;default&#39;</span><span class="p">:</span> <span class="p">[</span>
    <span class="s1">&#39;pyplanet.apps.contrib.admin.app.Admin&#39;</span><span class="p">,</span>
    <span class="s1">&#39;pyplanet.apps.contrib.jukebox.app.Jukebox&#39;</span><span class="p">,</span>
    <span class="s1">&#39;pyplanet.apps.contrib.karma.app.Karma&#39;</span><span class="p">,</span>
    <span class="s1">&#39;pyplanet.apps.contrib.local_records.app.LocalRecords&#39;</span><span class="p">,</span>
    <span class="s1">&#39;pyplanet.apps.contrib.dedimania.app.Dedimania&#39;</span><span class="p">,</span>
    <span class="s1">&#39;pyplanet.apps.contrib.players.app.Players&#39;</span><span class="p">,</span>
    <span class="s1">&#39;pyplanet.apps.contrib.mapinfo.app.MapInfo&#39;</span><span class="p">,</span>
    <span class="s1">&#39;pyplanet.apps.contrib.mx.app.MX&#39;</span><span class="p">,</span>
    <span class="s1">&#39;pyplanet.apps.contrib.transactions.app.Transactions&#39;</span><span class="p">,</span>
  <span class="p">],</span>
<span class="p">}</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">When new contributed apps will come available, you have to manually enable it in your settings.
Please take a look at our <a class="reference internal" href="../changelog.html"><span class="doc">Change Log</span></a> for details on changes.</p>
</div>
</div>
</div>


           </div>
           <div class="articleComments">
            
           </div>
          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2017, PyPlanet (Tom Valk).

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'0.2.0',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>